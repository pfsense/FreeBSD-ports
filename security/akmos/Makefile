PORTNAME=	akmos
PORTVERSION=	0.7.2
PORTREVISION=	3
CATEGORIES=	security

MAINTAINER=	melanhit@gmail.com
COMMENT=	Cryptographic library with low footprint

LICENSE=	BSD3CLAUSE
LICENSE_FILE=	${WRKSRC}/LICENSE

BUILD_DEPENDS=	as:devel/binutils

USES=		cmake compiler:c++11-lang

USE_GITHUB=	yes
GH_ACCOUNT=	melanhit

GNU_CONFIGURE=	yes

USE_LDCONFIG=	yes

# Fix build with clang11
CFLAGS+=	-fcommon

OPTIONS_DEFINE=	ASM TEST BENCH
OPTIONS_DEFAULT=ASM
OPTIONS_SUB=	yes

ASM_CMAKE_ON=	-DAKMOS_USE_ASM:BOOL=TRUE
ASM_CMAKE_OFF=	-DAKMOS_USE_ASM:BOOL=FALSE

BENCH_CMAKE_ON=	-DAKMOS_ENABLE_BENCH:BOOL=TRUE
BENCH_CMAKE_OFF=-DAKMOS_ENABLE_BENCH:BOOL=FALSE
BENCH_DESC=	Install benchmark

TEST_CMAKE_ON=	-DAKMOS_ENABLE_TEST:BOOL=TRUE
TEST_CMAKE_OFF=	-DAKMOS_ENABLE_TEST:BOOL=FALSE

.include <bsd.port.mk>
