--- CMakeLists.txt.orig	2025-10-01 17:58:58 UTC
+++ CMakeLists.txt
@@ -40,7 +40,7 @@ set(CMAKE_C_STANDARD 11)
 set(CMAKE_INSTALL_MESSAGE LAZY)
 
 set(CMAKE_C_STANDARD 11)
-set(CMAKE_CXX_STANDARD 14)
+set(CMAKE_CXX_STANDARD 17)
 set(CMAKE_INSTALL_DEFAULT_COMPONENT_NAME "netdata")
 
 option(USE_CXX_11 "Use C++11 instead of C++14 (should only be used on legacy systems that cannot support C++14, may disable some features)" False)
@@ -95,7 +95,7 @@ set(NETDATA_RUNTIME_PREFIX "${CMAKE_INSTALL_PREFIX}")
 set(OS_WINDOWS     False)
 
 set(NETDATA_RUNTIME_PREFIX "${CMAKE_INSTALL_PREFIX}")
-set(BINDIR usr/sbin)
+set(BINDIR sbin)
 
 if("${CMAKE_SYSTEM_NAME}" STREQUAL "Darwin")
         set(OS_MACOS True)
@@ -230,6 +230,7 @@ if(ENABLE_NETDATA_JOURNAL_FILE_READER OR ENABLE_PLUGIN
 
 # Setup Rust/Corrosion for plugins that need it
 if(ENABLE_NETDATA_JOURNAL_FILE_READER OR ENABLE_PLUGIN_OTEL)
+    #[[
     include(FetchContent)
     FetchContent_Declare(
         Corrosion
@@ -237,6 +238,8 @@ if(ENABLE_NETDATA_JOURNAL_FILE_READER OR ENABLE_PLUGIN
         GIT_TAG f3b91559efca32c6b54837866ef35ba98ff5b2ca # stable/v0.5
     )
     FetchContent_MakeAvailable(Corrosion)
+    ]]
+    find_package(Corrosion REQUIRED)
     corrosion_import_crate(MANIFEST_PATH src/crates/jf/Cargo.toml
                            CRATES journal_reader_ffi otel-plugin)
 endif()
@@ -413,7 +416,7 @@ include(NetdataBacktrace)
 include(NetdataJSONC)
 include(NetdataYAML)
 include(NetdataBacktrace)
-include(NetdataDlib)
+#include(NetdataDlib)
 
 if(ENABLE_LEGACY_EBPF_PROGRAMS)
         include(NetdataEBPFLegacy)
@@ -438,9 +441,9 @@ endif()
         netdata_bundle_sentry()
 endif()
 
-if(ENABLE_ML)
-  netdata_bundle_dlib()
-endif()
+#if(ENABLE_ML)
+#  netdata_bundle_dlib()
+#endif()
 
 #
 # check include files
@@ -3031,9 +3034,9 @@ add_executable(netdata
         "$<$<BOOL:${OS_WINDOWS}>:${NETDATA_RES_FILES}>"
 )
 
-if(ENABLE_ML)
-  netdata_add_dlib_to_target(netdata)
-endif()
+#if(ENABLE_ML)
+#  netdata_add_dlib_to_target(netdata)
+#endif()
 
 if(OS_WINDOWS)
         add_executable(NetdataClaim ${CLAIM_WINDOWS_FILES} ${NETDATA_CLAIM_RES_FILES})
@@ -3156,6 +3159,7 @@ if(ENABLE_PLUGIN_GO)
             COMPONENT plugin-go
             DESTINATION libexec/netdata/plugins.d)
 
+#[[
     # Build and install nd-mcp (stdio-golang bridge) exactly like go.d.plugin
     if (OS_WINDOWS)
         set(ND_MCP_NAME nd-mcp.exe)
@@ -3168,6 +3172,7 @@ if(ENABLE_PLUGIN_GO)
             ${CMAKE_BINARY_DIR}/${ND_MCP_NAME}
             COMPONENT plugin-go
             DESTINATION "${BINDIR}")
+]]
 endif()
 
 #
@@ -3197,12 +3202,12 @@ endif()
   string(REGEX REPLACE "/$" "" NETDATA_RUNTIME_PREFIX "${NETDATA_RUNTIME_PREFIX}")
 endif()
 
-set(CACHE_DIR "${NETDATA_RUNTIME_PREFIX}/var/cache/netdata")
-set(CONFIG_DIR "${NETDATA_RUNTIME_PREFIX}/etc/netdata")
-set(LIBCONFIG_DIR "${NETDATA_RUNTIME_PREFIX}/lib/netdata/conf.d")
-set(LOG_DIR "${NETDATA_RUNTIME_PREFIX}/var/log/netdata")
-set(PLUGINS_DIR "${NETDATA_RUNTIME_PREFIX}/libexec/netdata/plugins.d")
-set(VARLIB_DIR "${NETDATA_RUNTIME_PREFIX}/var/lib/netdata")
+set(CACHE_DIR "%%NETDATA_CACHE%%")
+set(CONFIG_DIR "%%ETCDIR%%")
+set(LIBCONFIG_DIR "${CMAKE_INSTALL_PREFIX}/lib/netdata/conf.d")
+set(LOG_DIR "%%NETDATA_LOG%%")
+set(PLUGINS_DIR "${CMAKE_INSTALL_PREFIX}/libexec/netdata/plugins.d")
+set(VARLIB_DIR "%%NETDATA_PERST%%")
 
 # A non-default value is only used when building Debian packages (/var/lib/netdata/www)
 if(NOT DEFINED WEB_DIR)
@@ -3255,11 +3260,12 @@ install(TARGETS netdata COMPONENT netdata DESTINATION 
 
 install(TARGETS netdata COMPONENT netdata DESTINATION "${BINDIR}")
 
-install(DIRECTORY COMPONENT netdata DESTINATION var/cache/netdata)
-install(DIRECTORY COMPONENT netdata DESTINATION var/log/netdata)
-install(DIRECTORY COMPONENT netdata DESTINATION var/lib/netdata/registry)
-install(DIRECTORY COMPONENT netdata DESTINATION var/lib/netdata/cloud.d)
-install(DIRECTORY COMPONENT netdata DESTINATION var/run/netdata)
+
+install(DIRECTORY COMPONENT netdata DESTINATION %%NETDATA_CACHE%%)
+install(DIRECTORY COMPONENT netdata DESTINATION %%NETDATA_LOG%%)
+install(DIRECTORY COMPONENT netdata DESTINATION %%NETDATA_PERST%%/registery)
+install(DIRECTORY COMPONENT netdata DESTINATION %%NETDATA_PERST%%/cloud.d)
+install(DIRECTORY COMPONENT netdata DESTINATION %%NETDATA_RUN%%)
 install(DIRECTORY COMPONENT netdata DESTINATION etc/netdata)
 install(DIRECTORY COMPONENT netdata DESTINATION etc/netdata/custom-plugins.d)
 install(DIRECTORY COMPONENT netdata DESTINATION etc/netdata/health.d)
@@ -3274,11 +3280,11 @@ set(sbindir_POST "${NETDATA_RUNTIME_PREFIX}/${BINDIR}"
 set(pkglibexecdir_POST "${NETDATA_RUNTIME_PREFIX}/libexec/netdata")
 set(localstatedir_POST "${NETDATA_RUNTIME_PREFIX}/var")
 set(sbindir_POST "${NETDATA_RUNTIME_PREFIX}/${BINDIR}")
-set(configdir_POST "${NETDATA_RUNTIME_PREFIX}/etc/netdata")
-set(libconfigdir_POST "${NETDATA_RUNTIME_PREFIX}/lib/netdata/conf.d")
-set(cachedir_POST "${NETDATA_RUNTIME_PREFIX}/var/cache/netdata")
-set(registrydir_POST "${NETDATA_RUNTIME_PREFIX}/var/lib/netdata/registry")
-set(varlibdir_POST "${NETDATA_RUNTIME_PREFIX}/var/lib/netdata")
+set(configdir_POST "%%ETCDIR%%")
+set(libconfigdir_POST "${CMAKE_INSTALL_PREFIX}/lib/netdata/conf.d")
+set(cachedir_POST "%%NETDATA_CACHE%%")
+set(registrydir_POST "%%NETDATA_PERST%%/registery")
+set(varlibdir_POST "%%NETDATA_PERST%%")
 set(netdata_user_POST "${NETDATA_USER}")
 set(netdata_group_POST "${NETDATA_USER}")
 
@@ -3804,8 +3810,8 @@ if(ENABLE_DASHBOARD)
 #
 
 if(ENABLE_DASHBOARD)
-  include(NetdataDashboard)
-  bundle_dashboard()
+  #include(NetdataDashboard)
+  #bundle_dashboard()
 
   install(FILES
           COMPONENT dashboard
