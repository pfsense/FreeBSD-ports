Context framework extracted from Shoulda
