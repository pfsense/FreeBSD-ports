--- ../cvs-build/cvs/Makefile.orig	2012-09-05 19:25:43.000000000 -0700
+++ ../cvs-build/cvs/Makefile	2025-08-05 23:33:37.681784000 -0700
@@ -29,15 +29,22 @@
 	 -I/usr/include/gnu \
 	 -I${CVSDIR}/lib -I${CVSDIR}/diff -I.
 
-DPADD=	${LIBCVS} ${LIBDIFF} ${LIBGNUREGEX} ${LIBMD} ${LIBCRYPT} ${LIBZ}
-LDADD=	${LIBCVS} ${LIBDIFF} -lgnuregex -lmd -lcrypt -lz
+DPADD=	${LIBCVS} ${LIBDIFF} ${LIBMD} ${LIBCRYPT} ${LIBZ}
+LDADD=	${LIBCVS} ${LIBDIFF} -lmd -lcrypt -lz
 
-.if ${MK_KERBEROS_SUPPORT} != "no"
+.if defined(KERBEROS_SUPPORT)
+.if exists(/usr/libdata/pkgconfig/mit-krb5.pc)
+# MIT KRB5
+LDADD+= -lgssapi_krb5 -lkrb5 -lkrb5support -lcrypto -lcrypt -lcom_err
+DPADD+= ${LIBGSSAPI_KRB5} ${LIBKRB5} ${LIBKRB5SUPPORT} ${LIBCRYPTO}
+DPADD+= ${LIBCRYPT} ${LIBCOM_ERR}
+.else
 CFLAGS+= -DHAVE_GSSAPI -DENCRYPTION
 LDADD+= -lgssapi -lkrb5 -lhx509 -lasn1 -lcrypto -lroken -lcrypt -lcom_err
 DPADD+= ${LIBGSSAPI} ${LIBKRB5} ${LIBHX509} ${LIBASN1} ${LIBCRYPTO} ${LIBROKEN}
 DPADD+= ${LIBCRYPT} ${LIBCOM_ERR}
 .endif
+.endif
 
 #
 # Regression test support
