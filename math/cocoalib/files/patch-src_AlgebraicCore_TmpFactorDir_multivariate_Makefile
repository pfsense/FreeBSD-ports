--- src/AlgebraicCore/TmpFactorDir/multivariate/Makefile.orig	2020-10-27 09:43:20 UTC
+++ src/AlgebraicCore/TmpFactorDir/multivariate/Makefile
@@ -1,74 +1,17 @@
 # Makefile for CoCoALib/src/AlgebraicCore/TmpFactorDir/multivariate/ directory.
 
-COCOA_ROOT=../../../..
-include $(COCOA_ROOT)/configuration/autoconf.mk
-CWD=src/AlgebraicCore/TmpFactorDir/multivariate/
-DEPEND_FILE=Makefile_dependencies
-
 SRCS=DUPZgcd_free_basis.c DUPZexgcd.c DUPZbivariate_lift.c DMPZfactors.c \
      DMPZfactor.c DMPZlist.c DMPZeval.c DMPZ.c DUPZinterp.c DMPZinterp.c \
      DMPZevalQ.c DMPZfactor_modp.c DMPZgcd.c DMPZ_to_DUPZ.c \
      DMPZlift.c DMPZ_to_DUPFF.c DMPZinteger_content.c DMPZmap_to_univariate.c
 #DUPFFbivariate_lift3.c
 
-OBJS=$(SRCS:.c=.o)
+all: ${SRCS:.c=.o}
+	ar rcs ../../libcocoa.a ${.ALLSRC}
+	echo ${.ALLSRC} >> ../../.ALLSRC
+	/bin/mv *.o ..
 
-%.o: %.c
-	$(COMPILE) -I. -I.. -I../linalg -c -o $@ $<
+.SUFFIXES:.o
 
-default: $(OBJS)
-	ar $(ARFLAGS) $(COCOA_LIB) $(OBJS)
-
-.PHONY: clean clean-local
-clean: clean-local
-	@echo "Cleaned CoCoALib/$(CWD)"
-
-clean-local:
-	@/bin/rm -f $(OBJS) "$(DEPEND_FILE).old"  "$(DEPEND_FILE).new" ./*~  ./.*~  ./.\#*
-	@/bin/rm -rf  ./*.dSYM
-
-.PHONY: veryclean
-veryclean: clean-local
-	@true >| "$(DEPEND_FILE)" # Empties $(DEPEND_FILE)
-	@echo "Verycleaned CoCoALib/$(CWD)"
-
-
-# This target checks whether we should really build DEPEND_FILE
-.PHONY: dependencies
-dependencies:
-	@if [ \! -s "$(DEPEND_FILE)" -o \! "$(DEPEND_FILE)" -nt "$(COCOA_HDR)" ] ; \
-	then \
-	  $(MAKE) create-dependencies; \
-	fi
-
-# This is the target which really does rebuild the DEPEND_FILE
-.PHONY: create-dependencies
-create-dependencies:
-	@/bin/rm -rf $(DEPEND_FILE).new
-	@echo "Rebuilding dependencies in <CoCoALib>/$(CWD)"
-	@echo "##################################################################"   >> $(DEPEND_FILE).new
-	@echo "#        ---  CoCoALib version $(COCOALIB_VERSION)  ---"              >> $(DEPEND_FILE).new
-	@echo "# Dependencies for directory $(CWD)"                                  >> $(DEPEND_FILE).new
-	@echo "# DO NOT EDIT: this file is automatically generated; to regenerate"   >> $(DEPEND_FILE).new
-	@echo "# run \`make dependencies' in the CoCoALib root directory."           >> $(DEPEND_FILE).new
-	@echo "##################################################################"   >> $(DEPEND_FILE).new
-	@echo                                                                        >> $(DEPEND_FILE).new
-	for srcfile in $(SRCS); \
-	do \
-	  objfile=`basename $$srcfile .c`.o; \
-	  $(CXX) $(INCLUDE_PATHS) -I. -I.. -I../linalg -MM "$$srcfile" -MQ "$$objfile" >> $(DEPEND_FILE).new; \
-	  echo >> $(DEPEND_FILE).new; \
-	done
-	@if [ -s "$(DEPEND_FILE)" ] ; \
-	then \
-	  /bin/mv -f "$(DEPEND_FILE)" "$(DEPEND_FILE).old" ; \
-	fi
-	@/bin/mv $(DEPEND_FILE).new  $(DEPEND_FILE)
-
-
-$(DEPEND_FILE):
-	@touch "$(DEPEND_FILE)"
-
-include $(DEPEND_FILE)
-
-$(OBJS): $(COCOA_ROOT)/configuration/autoconf.mk
+.c.o:
+	${CXX} ${CXXFLAGS} -o ${.TARGET} -c ${.IMPSRC}
