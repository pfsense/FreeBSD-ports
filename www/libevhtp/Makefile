PORTNAME=	libevhtp
PORTVERSION=	1.2.16
PORTREVISION=	4
CATEGORIES=	www

MAINTAINER=	ultima@FreeBSD.org
COMMENT=	Flexible replacement for libevent httpd API
WWW=		https://github.com/ellzey/libevhtp

LICENSE=	BSD3CLAUSE
LICENSE_FILE=	${WRKSRC}/LICENSE

LIB_DEPENDS=	libevent.so:devel/libevent

USES=		cmake
USE_LDCONFIG=	yes
USE_GITHUB=	yes
GH_ACCOUNT=	criticalstack

CMAKE_ARGS=	-DCMAKE_INCLUDE_PATH:PATH=include/event2 \
		-DCMAKE_LIBRARY_PATH:PATH=lib/event2 \
		-DEVHTP_HAS_C99:BOOL=FALSE

PLIST_SUB=	PORTVERSION=${PORTVERSION}

OPTIONS_DEFINE=	REGEX SSL THREADS STATIC DEBUG
OPTIONS_DEFAULT=REGEX SSL THREADS
OPTIONS_SUB=	yes

REGEX_CMAKE_BOOL_OFF=	EVHTP_DISABLE_REGEX
REGEX_LIB_DEPENDS=	libonig.so:devel/oniguruma

SSL_CMAKE_BOOL_OFF=	EVHTP_DISABLE_SSL
SSL_USES=		ssl

THREADS_CMAKE_BOOL_OFF=	EVHTP_DISABLE_EVTHR

STATIC_CMAKE_BOOL_OFF=	EVHTP_BUILD_SHARED

.include <bsd.port.mk>
