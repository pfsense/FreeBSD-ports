--- support-files/CMakeLists.txt.orig	2019-09-20 08:30:51 UTC
+++ support-files/CMakeLists.txt
@@ -24,8 +24,9 @@ IF(NOT UNIX)
   RETURN()
 ENDIF()
 
-INSTALL(FILES mysql.m4
-  DESTINATION ${INSTALL_SHAREDIR}/aclocal COMPONENT Development)
+IF(NOT WITHOUT_CLIENTLIBS)
+  INSTALL(FILES mysql.m4 DESTINATION ${INSTALL_SHAREDIR}/aclocal COMPONENT Development)
+ENDIF(NOT WITHOUT_CLIENTLIBS)
 
 SET(localstatedir "${MYSQL_DATADIR}")
 
@@ -45,6 +46,7 @@ CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/mysql.serve
 CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/mysql-log-rotate.in
   ${CMAKE_CURRENT_BINARY_DIR}/mysql-log-rotate @ONLY)
 
+IF(NOT WITHOUT_SERVER)
 INSTALL_SCRIPT(${CMAKE_CURRENT_BINARY_DIR}/mysql.server
   COMPONENT Server_Scripts
   DESTINATION ${INSTALL_SUPPORTFILESDIR}
@@ -62,3 +64,4 @@ INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/mysql-log-ro
   OWNER_READ OWNER_WRITE
   GROUP_READ WORLD_READ
   )
+ENDIF()
